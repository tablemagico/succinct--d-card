<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Succinctlandia ID Card Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root{--succinct-pink:#ff00b8}
    html,body{margin:0;padding:0;font-family:'Montserrat',sans-serif;background:#111;color:#fff;
              display:flex;flex-direction:column;align-items:center;gap:2rem;min-height:100vh}
    h1{margin-top:2rem;font-size:2rem}

    /* ---------- CARD PREVIEW ---------- */
    #card{position:relative;width:960px;aspect-ratio:16/9;
          background:url("card-template.png") center/contain no-repeat;overflow:hidden}
    .field{position:absolute;font-weight:700;line-height:1;color:var(--succinct-pink);text-transform:capitalize;
           pointer-events:none}

    /*  Coordinates tuned for 960‑wide preview; adjust if needed */
    .name {top:230px; left:730px; font-size:32px}
    .role {top:230px; left:1080px;font-size:32px}
    .stage{top:365px; left:730px; font-size:32px}
    .doj  {top:365px; left:1080px;font-size:32px}
    .city {top:500px; left:730px; font-size:32px}
    .x    {top:500px; left:1080px;font-size:32px}

    /* ---------- CONTROL PANEL ---------- */
    .panel{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;background:#222;
           padding:1.5rem 2rem;border-radius:12px;box-shadow:0 0 30px rgba(0,0,0,.3);
           width:min(95%,960px)}
    .panel label{display:flex;flex-direction:column;font-size:.9rem;gap:.3rem}
    .panel input{padding:.4rem .6rem;border:1px solid #555;border-radius:6px;background:#333;color:#fff;
                 font-size:1rem;min-width:200px}
    button#download{padding:.6rem 1.2rem;font-size:1rem;font-weight:700;color:#fff;
                    background:var(--succinct-pink);border:none;border-radius:6px;cursor:pointer;margin-left:auto}
    button#download:hover{opacity:.85}
    @media(max-width:1000px){#card{width:100%}}
  </style>
</head>
<body>
  <h1>Succinctlandia ID Card Builder</h1>

  <!-- ---------- Preview Card ---------- -->
  <div id="card">
    <span class="field name"  id="f-name"  data-default="Your Name">Your&nbsp;Name</span>
    <span class="field role"  id="f-role"  data-default="Your Role">Your&nbsp;Role</span>
    <span class="field stage" id="f-stage" data-default="Stage">Stage</span>
    <span class="field doj"   id="f-doj"   data-default="YYYY-MM-DD">YYYY-MM-DD</span>
    <span class="field city"  id="f-city"  data-default="City">City</span>
    <span class="field x"     id="f-x"     data-default="X Value">X&nbsp;Value</span>
  </div>

  <!-- ---------- Input Panel ---------- -->
  <form class="panel" id="controls" onsubmit="event.preventDefault()">
    <label>Name <input type="text" id="name" placeholder="e.g. Alice" maxlength="30" /></label>
    <label>Role <input type="text" id="role" placeholder="e.g. Builder" maxlength="30" /></label>
    <label>Stage<input type="text" id="stage"placeholder="e.g. Beta"   maxlength="30" /></label>
    <label>Date of Join <input type="date" id="doj" /></label>
    <label>City <input type="text" id="city" placeholder="e.g. Rampage City" maxlength="30" /></label>
    <label>X <input type="text" id="x" placeholder="e.g. Proofer" maxlength="30" /></label>
    <button id="download">Download PNG</button>
  </form>

  <!-- html2canvas CDN -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <!-- ---------- Logic (module‑scoped) ---------- -->
  <script type="module">
    /** inputId ⇢ spanId eşlemesi */
    const fieldMap = { name:'f-name', role:'f-role', stage:'f-stage', doj:'f-doj', city:'f-city', x:'f-x' };

    for (const [inputId, spanId] of Object.entries(fieldMap)) {
      const input = document.getElementById(inputId);
      const span  = document.getElementById(spanId);
      input.addEventListener('input', () => {
        span.textContent = input.value.trim() || span.dataset.default;
      });
    }

    /* ---- DOWNLOAD PNG ---- */
    document.getElementById('download').addEventListener('click', async () => {
      const card   = document.getElementById('card');
      const canvas = await html2canvas(card,{backgroundColor:null,useCORS:true,scale:2}); // 2× for sharper export
      const link   = document.createElement('a');
      link.download = 'succinctlandia_id_card.png';
      link.href     = canvas.toDataURL('image/png');
      link.click();
    });
  </script>
</body>
</html>
